{{define "game/spell-ability-modal.html"}}
<!-- Spell/Ability Detail Modal Overlay -->
<div id="spell-ability-modal" class="hidden absolute z-50" style="top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.85); pointer-events: none;">
    <div class="relative bg-win95-bgDark m-2" style="border: 2px solid #808080; max-width: 320px; margin-left: auto; margin-right: auto; margin-top: 30px; pointer-events: auto; max-height: calc(100% - 60px); overflow-y: auto;">
        <!-- Title Bar -->
        <div id="modal-title-bar" class="bg-gradient-to-r from-blue-900 to-blue-700 px-2 py-1 flex items-center justify-between sticky top-0 z-10">
            <div class="flex items-center gap-2">
                <img id="modal-icon" src="" alt="" style="width: 16px; height: 16px; image-rendering: pixelated;" class="hidden">
                <span id="modal-title" class="text-white font-bold" style="font-size: 10px;">Detail</span>
            </div>
            <button onclick="window.closeSpellAbilityModal()" class="text-white hover:bg-red-600 px-1" style="font-size: 9px; background: #c0c0c0; color: black; border: 1px solid #000;">&#x2715;</button>
        </div>

        <!-- Modal Content -->
        <div class="p-3 bg-win95-bgDark" style="font-size: 8px;">

            <!-- Tier Tabs (for abilities with scaling tiers) -->
            <div id="modal-tier-tabs" class="hidden flex gap-1 mb-2 flex-wrap">
                <!-- Tier tab buttons populated by JS -->
            </div>

            <!-- Badges Row (school/level for spells, cost/cooldown for abilities) -->
            <div id="modal-badges" class="flex gap-1 mb-2 flex-wrap">
                <!-- Populated by JS -->
            </div>

            <!-- Description -->
            <div id="modal-description" class="text-gray-300 mb-3" style="font-size: 7px; line-height: 1.4;">
            </div>

            <!-- Stats Grid (Range, Cast Time, Duration, Save) for spells -->
            <div id="modal-stats-grid" class="hidden grid grid-cols-2 gap-1 mb-3" style="font-size: 7px;">
            </div>

            <!-- Damage/Heal Section -->
            <div id="modal-damage-section" class="hidden mb-3 p-2" style="background: rgba(0,0,0,0.3); border: 1px solid #444; font-size: 7px;">
            </div>

            <!-- Effects Section (for ability tiers) -->
            <div id="modal-effects-section" class="hidden mb-3 p-2" style="background: rgba(0,0,0,0.3); border: 1px solid #444; font-size: 7px;">
            </div>

            <!-- Material Components (for spells with required components) -->
            <div id="modal-components-section" class="hidden mb-3 p-2" style="background: rgba(0,0,0,0.3); border: 1px solid #444; font-size: 7px;">
                <div class="text-gray-400 mb-1 font-bold">COMPONENTS</div>
                <div id="modal-components-list" class="flex flex-wrap gap-2">
                    <!-- Component item icons populated by JS -->
                </div>
            </div>

            <!-- Notes -->
            <div id="modal-notes" class="hidden text-gray-500 italic mb-3" style="font-size: 6px;">
            </div>

            <!-- Action Button (Prepare for spells, Use for abilities - stubbed) -->
            <div id="modal-action-container" class="hidden">
                <button id="modal-action-button"
                    class="w-full px-3 py-2 font-bold text-white"
                    style="font-size: 8px; background: #15803d; border-top: 2px solid #22c55e; border-left: 2px solid #22c55e; border-right: 2px solid #166534; border-bottom: 2px solid #166534; cursor: pointer;"
                    onclick="window.handleModalAction()">
                    PREPARE
                </button>
            </div>
        </div>
    </div>
</div>
{{end}}
